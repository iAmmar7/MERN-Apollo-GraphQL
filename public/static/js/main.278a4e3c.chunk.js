(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,a,t){e.exports=t.p+"static/media/spinner.ea3be1eb.gif"},46:function(e,a,t){e.exports=t(59)},51:function(e,a,t){},58:function(e,a,t){},59:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(38),c=t.n(l),o=(t(51),t(12)),i=t(19),m=t(17),s=t(10),u=Object(i.e)((function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark navbar-expand"},r.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},r.a.createElement("ul",{className:"navbar-nav ml-auto mr-auto"},r.a.createElement("li",{className:"nav-item mr-3"},r.a.createElement(o.c,{to:"/add-company",className:"nav-link",activeClassName:"active"},"Add Company")),r.a.createElement("li",{className:"nav-item mr-3"},r.a.createElement(o.c,{to:"/add-car",className:"nav-link",activeClassName:"active"},"Add Car")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{to:"/all-cars/1",className:e.location.pathname.includes("/all-cars")?"nav-link active":"nav-link",activeClassName:"active"},"All Cars")))))})),d=function(){return r.a.createElement("div",{className:"dark-overlay landing-inner"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h1",{className:"display-3 title"},"PlanZ Challenge"),r.a.createElement("p",{className:"lead"},"CRUD Application with Node, Express, MongoDB, Apollo Server, GraphQL, React, Apollo Client"),r.a.createElement("hr",null),r.a.createElement(o.b,{to:"/all-cars/1",className:"btn btn-lg btn-primary py-2 px-4 mr-2"},"See all cars")))))},p=t(25),v=t(5),b=t(13),g=t(20);function f(){var e=Object(g.a)(["\n  mutation AddCompany($name: String!, $location: String!) {\n    addCompany(name: $name, location: $location) {\n      id\n      name\n      location\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=Object(g.a)(["\n  {\n    companies {\n      id\n      name\n    }\n  }\n"]);return h=function(){return e},e}var E=Object(m.b)(h()),y=Object(m.b)(f()),N=function(e){var a=e.name,t=e.placeholder,n=e.value,l=e.error,c=e.info,o=e.type,i=e.onChange,m=e.disabled;return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:o,className:l?"form-control form-control-lg is-invalid":"form-control form-control-lg",placeholder:t,name:a,value:n,onChange:i,disabled:m}),c&&r.a.createElement("small",{className:"form-text text-muted"},c),l&&r.a.createElement("div",{className:"invalid-feedback"},l))},k=function(e){var a=Object(n.useState)(""),t=Object(v.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(""),i=Object(v.a)(o,2),m=i[0],s=i[1],u=Object(n.useState)({}),d=Object(v.a)(u,2),g=d[0],f=d[1],h=Object(b.b)(y),k=Object(v.a)(h,2),C=k[0],j=k[1].loading;return r.a.createElement("div",{className:"container mt-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center title"},"Add Company"),r.a.createElement("p",{className:"lead text-center"},"Let's add some info related to company!"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),f({}),l.trim().length<1?f(Object(p.a)(Object(p.a)({},g),{},{name:"Compnay name is required!"})):m.trim().length<1?f(Object(p.a)(Object(p.a)({},g),{},{location:"Compnay location is required!"})):C({variables:{name:l,location:m},refetchQueries:[{query:E}],awaitRefetchQueries:!0}).then((function(a){console.log(a),e.history.push("/add-car")})).catch((function(e){var a,t;(console.log(JSON.stringify(e)),null===e||void 0===e||null===(a=e.graphQLErrors[0])||void 0===a?void 0:a.message)&&f({name:null===e||void 0===e||null===(t=e.graphQLErrors[0])||void 0===t?void 0:t.message})}))}},r.a.createElement(N,{placeholder:"Company Name",name:"name",type:"text",value:l,onChange:function(e){var a=e.target.value;return c(a)},error:g.name,info:"A name of a company"}),r.a.createElement(N,{placeholder:"Location",name:"location",type:"text",value:m,onChange:function(e){var a=e.target.value;return s(a)},error:g.location,info:"Location of a company"}),r.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-dark btn-block mt-4",disabled:j},"Submit")))))},C=t(29),j=function(e){var a=e.name,t=e.value,n=e.error,l=e.info,c=e.onChange,o=e.options.map((function(e){return r.a.createElement("option",{key:e.label,value:e.value},e.label)}));return r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:n?"form-control form-control-lg is-invalid":"form-control form-control-lg",name:a,value:t,onChange:c},o),l&&r.a.createElement("small",{className:"form-text text-muted"},l),n&&r.a.createElement("div",{className:"invalid-feedback"},n))},O=t(45),S=t.n(O),x=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:S.a,style:{width:"100px",margin:"auto",display:"block",color:"red"},alt:"Loading..."}))};function $(){var e=Object(g.a)(["\n  mutation DeleteCar($carId: String!) {\n    deleteCar(carId: $carId) {\n      id\n      name\n    }\n  }\n"]);return $=function(){return e},e}function w(){var e=Object(g.a)(["\n  query GetCars($limit: Int!, $page: Int!) {\n    paginatedCars(limit: $limit, page: $page) {\n      cars {\n        id\n        name\n        make\n        company {\n          id\n          name\n        }\n      }\n      totalCars\n      currentPage\n      perPage\n      totalPages\n    }\n  }\n"]);return w=function(){return e},e}function A(){var e=Object(g.a)(["\n  mutation EditCar($carId: String!, $name: String!, $make: String!, $company: String!) {\n    updateCar(carId: $carId, name: $name, make: $make, company: $company) {\n      id\n      name\n      make\n    }\n  }\n"]);return A=function(){return e},e}function q(){var e=Object(g.a)(["\n  mutation AddCar($name: String!, $make: String!, $company: String!) {\n    addCar(name: $name, make: $make, company: $company) {\n      id\n      name\n      make\n    }\n  }\n"]);return q=function(){return e},e}var I=Object(m.b)(q()),Q=Object(m.b)(A()),D=Object(m.b)(w()),L=Object(m.b)($()),M=function(e){var a,t,l,c,i,m,s,u=Object(n.useState)(""),d=Object(v.a)(u,2),p=d[0],g=d[1],f=Object(n.useState)(""),h=Object(v.a)(f,2),y=h[0],k=h[1],O=Object(n.useState)(""),S=Object(v.a)(O,2),$=S[0],w=S[1],A=Object(n.useState)({}),q=Object(v.a)(A,2),Q=q[0],L=q[1],M=Object(b.c)(E),P=Object(b.b)(I),R=Object(v.a)(P,2),J=R[0],B=R[1].loading,U=null;return M.loading?U=r.a.createElement(x,null):(null===M||void 0===M||null===(a=M.data)||void 0===a||null===(t=a.companies)||void 0===t?void 0:t.length)&&(U=r.a.createElement(j,{name:"company",options:function(e){var a=[{label:"* Choose...",value:""}];if(e.length>0)for(var t=0;t<e.length;t++)a=[].concat(Object(C.a)(a),[{label:e[t].name,value:e[t].id}]);return a}(M.data.companies),value:$,onChange:function(e){var a=e.target.value;return w(a)},error:Q.company,info:"Select a company of this car"})),(null===M||void 0===M||null===(l=M.data)||void 0===l?void 0:l.companies)&&!(null===M||void 0===M||null===(c=M.data)||void 0===c||null===(i=c.companies)||void 0===i?void 0:i.length)>0?r.a.createElement("div",{className:"profiles mt-2"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"display-4 text-center title"},"Cars"),r.a.createElement("p",{className:"lead text-center"},"See All Cars Here"),r.a.createElement("div",{className:"card-group justify-content-center"},r.a.createElement(o.b,{to:"/add-company",className:"btn btn-lg btn-primary"},"Please add a company first!")))):r.a.createElement("div",{className:"container mt-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center title"},"Add Car"),r.a.createElement("p",{className:"lead text-center"},"Let's add some info related to car!"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),p.trim().length<1?L({name:"Car name is required!"}):y.trim().length<4||y.trim().length>4?L({make:"Car making year must be 4 digit!"}):0!==$.length?(L({}),J({variables:{name:p,make:y,company:$},refetchQueries:[{query:D,variables:{limit:6,page:1}}],awaitRefetchQueries:!0}).then((function(a){console.log(a),e.history.push("/all-cars/1")})).catch((function(e){console.log(JSON.stringify(e))}))):L({company:"Car making company is required!"})}},r.a.createElement(N,{placeholder:"Car Name",name:"name",type:"text",value:p,onChange:function(e){var a=e.target.value;return g(a)},error:Q.name,info:"A name of a car"}),r.a.createElement(N,{placeholder:"Car Make",name:"make",type:"number",value:y,onChange:function(e){var a=e.target.value;return k(a)},error:Q.make,info:"Making year of a car"}),U,r.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-dark btn-block mt-4",disabled:B||!(null===M||void 0===M||null===(m=M.data)||void 0===m||null===(s=m.companies)||void 0===s?void 0:s.length)>0},"Submit")))))},P=function(e){var a,t,l,c,o,i,m=Object(n.useState)(""),s=Object(v.a)(m,2),u=s[0],d=s[1],p=Object(n.useState)(""),g=Object(v.a)(p,2),f=g[0],h=g[1],y=Object(n.useState)(""),k=Object(v.a)(y,2),O=k[0],S=k[1],$=Object(n.useState)({}),w=Object(v.a)($,2),A=w[0],q=w[1];if(null===e||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.car){var I=e.location.state.car;""===u&&d(I.name),""===f&&h(I.make),""===O&&S(I.company.id)}var L=Object(b.c)(E),M=Object(b.b)(Q),P=Object(v.a)(M,2),R=P[0],J=P[1].loading,B=null;return B=(null===L||void 0===L||null===(l=L.data)||void 0===l||null===(c=l.companies)||void 0===c?void 0:c.length)>0?r.a.createElement(j,{name:"company",options:function(e){var a=[{label:"* Choose...",value:""}];if(e.length>0)for(var t=0;t<e.length;t++)a=[].concat(Object(C.a)(a),[{label:e[t].name,value:e[t].id}]);return a}(L.data.companies),value:O,onChange:function(e){var a=e.target.value;return S(a)},error:A.company,info:"Select a company of this car"}):r.a.createElement(x,null),r.a.createElement("div",{className:"container mt-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center title"},"Edit Car"),r.a.createElement("p",{className:"lead text-center"},"Let's edit some info related to car!"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),u.trim().length<1?q({name:"Car name is required!"}):f.trim().length<4?q({make:"Car making year must be 4 digit!"}):0!==O.length?(q({}),R({variables:{carId:e.location.state.car.id,name:u,make:f,company:O},refetchQueries:[{query:D,variables:{limit:6,page:1}}],awaitRefetchQueries:!0}).then((function(a){console.log(a),e.history.push("/all-cars/1")})).catch((function(e){console.log(JSON.stringify(e))}))):q({company:"Car making company is required!"})}},r.a.createElement(N,{placeholder:"Car Name",name:"name",type:"text",value:u,onChange:function(e){var a=e.target.value;return d(a)},error:A.name,info:"A name of a car"}),r.a.createElement(N,{placeholder:"Car Make",name:"make",type:"number",value:f,onChange:function(e){var a=e.target.value;return h(a)},error:A.make,info:"Making year of a car"}),B,r.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-dark btn-block mt-4",disabled:J||!(null===L||void 0===L||null===(o=L.data)||void 0===o||null===(i=o.companies)||void 0===i?void 0:i.length)>0},"Submit")))))},R=Object(i.e)((function(e){var a=e.id,t=e.name,n=e.make,l=e.company,c=e.fetchUpdatedData,o=e.history,i=Object(b.b)(L),m=Object(v.a)(i,2),s=m[0],u=m[1].loading;return r.a.createElement("div",{className:"col-lg-3 col-md-4 card-width"},r.a.createElement("div",{className:"card text-white bg-dark m-3 p-2 card-item"},r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("h5",{className:"card-title title"},t),r.a.createElement("p",{className:"card-text"},n),r.a.createElement("p",{className:"card-text"},l.name),r.a.createElement("button",{className:"btn btn-primary mr-2 px-3",onClick:function(){o.push({pathname:"/edit-car/".concat(a),state:{car:{id:a,name:t,make:n,company:l}}})}},"Edit"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){s({variables:{carId:a},refetchQueries:[{query:D,variables:{limit:6,page:1}}],awaitRefetchQueries:!0}).then((function(e){console.log(e),c(e.data)})).catch((function(e){return console.log(e)}))},disabled:u},"Delete"))))})),J=function(e){var a,t,l=Object(n.useState)(null),c=Object(v.a)(l,2),i=c[0],m=c[1],s=Object(n.useState)(null),u=Object(v.a)(s,2),d=u[0],p=u[1],g=Object(n.useState)(null),f=Object(v.a)(g,2),h=(f[0],f[1]),E=Object(b.a)(D),y=Object(v.a)(E,2),N=y[0],k=y[1].data;Object(n.useEffect)((function(){var a;console.log("useEffect run!",[e.match.params.page]),a=parseInt(e.match.params.page),N({variables:{limit:6,page:a},refetchQueries:[{query:D,variables:{limit:6,page:a}}],awaitRefetchQueries:!0})}),[e.match.params.page]),null===i&&(null===k||void 0===k||null===(a=k.paginatedCars)||void 0===a?void 0:a.cars)&&(m(k.paginatedCars.cars),p(k.paginatedCars.totalCars),h(k.paginatedCars.currentPage));var C,j,O,S,$=function(a){e.history.push("/all-cars/".concat(a))},w=function(e){var a=i.filter((function(a){return a.id!==e.deleteCar.id}));m(a)},A=[];if(null===k||void 0===k||null===(t=k.paginatedCars)||void 0===t?void 0:t.cars){for(var q=Math.ceil(d/6),I=1;I<=Math.ceil(d/6);I++)A.push(I);C=A.map((function(a){return r.a.createElement("li",{key:a,className:"page-item"},r.a.createElement("button",{className:parseInt(e.match.params.page)===a?"page-link btn bg-dark text-white":"page-link btn text-dark",onClick:function(){return $(a)}},a))})),j=r.a.createElement("li",{key:0,className:"page-item"},r.a.createElement("button",{className:"page-link btn text-dark",onClick:function(){return $(1)}},"\xab")),O=r.a.createElement("li",{key:q+1,className:"page-item"},r.a.createElement("button",{className:"page-link btn text-dark",onClick:function(){return $(q)}},"\xbb"))}return r.a.createElement("div",{className:"profiles mt-2"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"display-4 text-center title"},"Cars"),r.a.createElement("p",{className:"lead text-center"},"See All Cars Here"),null!==(S=i)&&S.length>0?r.a.createElement("div",{className:"card-group justify-content-center"},S.map((function(e){var a=e.id,t=e.name,n=e.make,l=e.company;return r.a.createElement(R,{key:a,id:a,name:t,make:n,company:l,fetchUpdatedData:w})}))):null!==S&&0===S.length?r.a.createElement("div",{className:"card-group justify-content-center"},r.a.createElement(o.b,{to:"/add-car",className:"btn btn-lg btn-primary"},"Please add some cars!")):r.a.createElement(x,null),(null===i||void 0===i?void 0:i.length)>0?r.a.createElement("div",{className:"card-group justify-content-center"},r.a.createElement("ul",{className:"pagination-list"},j,C,O)):null))},B=(t(58),new m.a({uri:"/graphql"}));var U=function(){return r.a.createElement(s.a,{client:B},r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement(i.a,{exact:!0,path:"/",component:d}),r.a.createElement(i.a,{exact:!0,path:"/add-company",component:k}),r.a.createElement(i.a,{exact:!0,path:"/add-car",component:M}),r.a.createElement(i.a,{exact:!0,path:"/edit-car/:id",component:P}),r.a.createElement(i.a,{exact:!0,path:"/all-cars/:page",component:J}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.278a4e3c.chunk.js.map